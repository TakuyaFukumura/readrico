<!DOCTYPE html>
<html lang="ja" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>読書記録詳細</title>
    <link rel="stylesheet" th:href="@{/css/tailwind.css}">
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto max-w-3xl bg-white p-8 rounded-lg shadow-lg">
        <a href="/reading-records" class="inline-block text-blue-500 no-underline mb-5 text-sm hover:underline">← 読書記録一覧に戻る</a>
        
        <h1 class="text-3xl text-gray-800 border-b-4 border-blue-500 pb-3 mb-6">読書記録詳細</h1>
        
        <!-- メッセージ表示 -->
        <div th:if="${message}" class="bg-green-100 border border-green-300 text-green-700 p-3 rounded mb-5" th:text="${message}"></div>
        <div th:if="${error}" class="bg-red-100 border border-red-300 text-red-700 p-3 rounded mb-5" th:text="${error}"></div>
        
        <div class="mb-6">
            <div class="font-bold text-gray-700 mb-2">タイトル</div>
            <div class="bg-gray-50 p-3 rounded border border-gray-200 min-h-5" th:text="${readingRecord.title}">タイトル</div>
        </div>
        
        <div class="mb-6">
            <div class="font-bold text-gray-700 mb-2">著者</div>
            <div class="bg-gray-50 p-3 rounded border border-gray-200 min-h-5" th:text="${readingRecord.author ?: '未設定'}">著者</div>
        </div>
        
        <div class="mb-6">
            <div class="font-bold text-gray-700 mb-2">読書状態</div>
            <div class="bg-gray-50 p-3 rounded border border-gray-200 min-h-5">
                <span class="status-badge" 
                      th:classappend="'status-' + ${readingRecord.readingStatus.name()}"
                      th:text="${readingRecord.readingStatus.displayName}">状態</span>
            </div>
        </div>
        
        <div class="mb-6" th:if="${readingRecord.totalPages != null and readingRecord.totalPages > 0}">
            <div class="font-bold text-gray-700 mb-2">読書進捗</div>
            <div class="bg-gray-50 p-3 rounded border border-gray-200 min-h-5">
                <div class="flex items-center gap-4">
                    <div class="progress-bar">
                        <div class="progress-fill" 
                             th:style="'width: ' + ${progressPercent} + '%'"></div>
                    </div>
                    <div class="font-bold text-gray-700" 
                         th:text="${readingRecord.currentPage} + ' / ' + ${readingRecord.totalPages} + ' ページ'">
                        進捗
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mb-6">
            <div class="font-bold text-gray-700 mb-2">概要</div>
            <div class="bg-gray-50 p-3 rounded border border-gray-200 min-h-20 whitespace-pre-wrap" th:text="${readingRecord.summary ?: ''}">概要</div>
        </div>
        
        <div class="mb-6">
            <div class="font-bold text-gray-700 mb-2">感想</div>
            <div class="bg-gray-50 p-3 rounded border border-gray-200 min-h-20 whitespace-pre-wrap" th:text="${readingRecord.thoughts ?: ''}">感想</div>
        </div>
        
        <div class="mt-8 flex gap-3 flex-wrap">
            <a th:href="@{/reading-records/{id}/edit(id=${readingRecord.id})}" class="bg-blue-500 text-white py-2 px-5 border-0 rounded-md no-underline cursor-pointer transition-all duration-300 ease-in-out inline-block hover:bg-blue-700">編集</a>
            <form th:action="@{/reading-records/{id}/delete(id=${readingRecord.id})}" method="post" 
                  class="inline ml-auto"
                  onsubmit="return confirm('この読書記録を削除してもよろしいですか？')">
                <button type="submit" class="bg-red-500 text-white py-2 px-5 border-0 rounded-md cursor-pointer transition-all duration-300 ease-in-out hover:bg-red-600">削除</button>
            </form>
        </div>
    </div>
</body>
</html>
