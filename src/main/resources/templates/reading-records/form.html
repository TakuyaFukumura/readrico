<!DOCTYPE html>
<html lang="ja" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${readingRecord.id != null ? '読書記録編集' : '読書記録登録'}">読書記録登録</title>
    <link rel="stylesheet" th:href="@{/css/tailwind.css}">
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto max-w-3xl bg-white p-8 rounded-lg shadow-lg">
        <a th:href="${readingRecord.id != null} ? @{/reading-records/{id}(id=${readingRecord.id})} : @{/reading-records}"
           class="inline-block text-blue-500 no-underline mb-5 text-sm hover:underline">← 前の画面へ戻る</a>
        
        <h1 class="text-3xl text-gray-800 border-b-4 border-blue-500 pb-3 mb-6" th:text="${readingRecord.id != null ? '読書記録編集' : '読書記録登録'}">読書記録登録</h1>
        
        <!-- エラーメッセージ表示 -->
        <div th:if="${error}" class="bg-red-100 border border-red-300 text-red-700 p-3 rounded mb-5" th:text="${error}"></div>
        
        <form th:action="@{/reading-records/save}" th:object="${readingRecord}" method="post">
            <input type="hidden" th:field="*{id}" />
            <input type="hidden" th:field="*{createdAt}" />
            <input type="hidden" th:field="*{updatedAt}" />
            
            <div class="mb-5">
                <label for="title" class="block font-bold text-gray-700 mb-2">タイトル <span class="text-red-500">*</span></label>
                <input type="text" id="title" th:field="*{title}" class="w-full p-3 border border-gray-300 rounded-md font-sans focus:outline-none focus:border-blue-500 focus:ring-2" required />
            </div>
            
            <div class="mb-5">
                <label for="author" class="block font-bold text-gray-700 mb-2">著者</label>
                <input type="text" id="author" th:field="*{author}" class="w-full p-3 border border-gray-300 rounded-md font-sans focus:outline-none focus:border-blue-500 focus:ring-2" />
            </div>
            
            <div class="mb-5">
                <label for="readingStatus" class="block font-bold text-gray-700 mb-2">読書状態 <span class="text-red-500">*</span></label>
                <select id="readingStatus" th:field="*{readingStatus}" class="w-full p-3 border border-gray-300 rounded-md font-sans cursor-pointer focus:outline-none focus:border-blue-500 focus:ring-2" required>
                    <option th:each="status : ${statuses}" 
                            th:value="${status}" 
                            th:text="${status.displayName}"
                            th:selected="${status == readingRecord.readingStatus}">状態</option>
                </select>
            </div>
            
            <div class="flex gap-4 mb-5">
                <div class="flex-1">
                    <label for="currentPage" class="block font-bold text-gray-700 mb-2">現在のページ</label>
                    <input type="number" id="currentPage" th:field="*{currentPage}" class="w-full p-3 border border-gray-300 rounded-md font-sans focus:outline-none focus:border-blue-500 focus:ring-2" min="0" />
                </div>
                <div class="flex-1">
                    <label for="totalPages" class="block font-bold text-gray-700 mb-2">総ページ数</label>
                    <input type="number" id="totalPages" th:field="*{totalPages}" class="w-full p-3 border border-gray-300 rounded-md font-sans focus:outline-none focus:border-blue-500 focus:ring-2" min="1" />
                </div>
            </div>
            
            <div class="mb-5">
                <label for="summary" class="block font-bold text-gray-700 mb-2">概要</label>
                <textarea id="summary" th:field="*{summary}" class="w-full p-3 border border-gray-300 rounded-md font-sans resize-vertical min-h-20 focus:outline-none focus:border-blue-500 focus:ring-2" rows="4" 
                          placeholder="本の内容の概要を記入してください"></textarea>
            </div>
            
            <div class="mb-5">
                <label for="thoughts" class="block font-bold text-gray-700 mb-2">感想</label>
                <textarea id="thoughts" th:field="*{thoughts}" class="w-full p-3 border border-gray-300 rounded-md font-sans resize-vertical min-h-20 focus:outline-none focus:border-blue-500 focus:ring-2" rows="4" 
                          placeholder="読んだ感想や印象に残ったことを記入してください"></textarea>
            </div>
            
            <div class="mt-8 flex gap-3 flex-wrap">
                <button type="submit" class="bg-blue-500 text-white py-3 px-6 border-0 rounded-md no-underline cursor-pointer transition-all duration-300 ease-in-out inline-block text-lg hover:bg-blue-700">
                    <span th:text="${readingRecord.id != null ? '更新' : '登録'}">登録</span>
                </button>
            </div>
        </form>
    </div>
</body>
</html>
