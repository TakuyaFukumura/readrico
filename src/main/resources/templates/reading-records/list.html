<!DOCTYPE html>
<html lang="ja" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>読書記録</title>
    <link rel="stylesheet" th:href="@{/css/tailwind.css}">
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto max-w-6xl bg-white p-8 rounded-lg shadow-lg">
        <h1 class="text-3xl text-gray-800 border-b-4 border-blue-500 pb-3 mb-6">読書記録</h1>
        
        <!-- メッセージ表示 -->
        <div th:if="${message}" class="bg-green-100 border border-green-300 text-green-700 p-3 rounded mb-5" th:text="${message}"></div>
        <div th:if="${error}" class="bg-red-100 border border-red-300 text-red-700 p-3 rounded mb-5" th:text="${error}"></div>
        
        <!-- 新規登録ボタン -->
        <a href="/reading-records/new" class="inline-block bg-green-500 text-white py-3 px-6 no-underline rounded-md mb-5 transition-colors duration-300 ease-in-out hover:bg-green-600">+ 新しい読書記録を追加</a>
        
        <!-- タブ -->
        <div class="flex mb-5 border-b border-gray-300">
            <a href="/reading-records?status=UNREAD" 
               th:classappend="${currentStatusName == 'UNREAD'} ? 'active' : ''"
               class="tab">
                未読
                <span class="tab-count" th:text="${unreadCount}">0</span>
            </a>
            <a href="/reading-records?status=READING" 
               th:classappend="${currentStatusName == 'READING'} ? 'active' : ''"
               class="tab">
                読書中
                <span class="tab-count" th:text="${readingCount}">0</span>
            </a>
            <a href="/reading-records?status=COMPLETED" 
               th:classappend="${currentStatusName == 'COMPLETED'} ? 'active' : ''"
               class="tab">
                読了
                <span class="tab-count" th:text="${completedCount}">0</span>
            </a>
            <a href="/reading-records?status=PAUSED" 
               th:classappend="${currentStatusName == 'PAUSED'} ? 'active' : ''"
               class="tab">
                中止
                <span class="tab-count" th:text="${pausedCount}">0</span>
            </a>
        </div>
        
        <!-- 読書記録一覧 -->
        <div class="grid gap-4">
            <div th:if="${#lists.isEmpty(readingRecords)}" class="text-center text-gray-600 italic py-10">
                この状態の読書記録はありません
            </div>
            
            <div th:each="record : ${readingRecords}" class="bg-white border border-gray-300 rounded-md p-5 shadow transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-md">
                <a th:href="@{/reading-records/{id}(id=${record.id})}" class="no-underline text-inherit">
                    <div class="text-xl font-bold text-gray-800 mb-1" th:text="${record.title}">タイトル</div>
                    <div class="text-gray-600 mb-2" th:text="${record.author}">著者</div>
                    <div class="text-green-500 text-sm" 
                         th:if="${record.totalPages != null and record.totalPages > 0}"
                         th:text="${record.currentPage} + '/' + ${record.totalPages} + 'ページ'">
                        進捗
                    </div>
                </a>
            </div>
        </div>
    </div>
</body>
</html>
